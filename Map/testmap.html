<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 90%; top:50px }
    </style>
    <script type="text/javascript"
      
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCksRMHIDnytHj9YUsVIM-8VAu4BvK-eSw&sensor=true">
    </script>
    <script type="text/javascript">
	var firstconnect = true;
	var socket;
	var map;
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);
      }
	google.maps.event.addDomListener(window, 'load', initialize);
	function moveTo(){
		var pos = new google.maps.LatLng(document.getElementById('lat').value,
						document.getElementById('long').value);
		var marker = new google.maps.Marker({
			position: pos,
			map: map,
			title: 'Marker'
		});
		map.panTo(pos);
	}
	function test(){
		socket.emit('hi');
		alert("test");
	}

	function plot(params){
		var pos = new google.maps.LatLng(params.lat, params.long);
		var marker = new google.maps.Marker({
			position: pos,
			map: map,
			title: 'Marker'
		});
		map.panTo(pos);
		alert("Here")
	}
	
	map.addListener('moveTo', moveTo);
	map.addlistener('test', test);
	map.addlistener('plot', function(params){
		alert(params.lat);
	});
//	socket.on('plot', function(params){
//		alert(params.lat);
//	});
    </script>
  </head>
  <body>
	  
	<button id="moveTo" onClick='moveTo()'/>Move To</button>
	lat:<input id="lat" type = "number" value=0>
	long:<input id ='long' type = "number" value=0>
	<div id="map-canvas"/>
  </body>
</html>
